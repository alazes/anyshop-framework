<ion-card [class]="innerClass">
  <ion-card-content>
    <!-- <ion-fab *ngIf="editing" horizontal="start">
      <ion-chip  color="warning" outline>
        {{ quantityFormControl.value || 0 }}
      </ion-chip>
    </ion-fab> -->

    <ion-grid class="ion-no-padding">
      <ion-row class="ion-align-items-center" no-wrap>
        <ion-col size="3" class="ion-text-center">
          <img [src]="picture" />
        </ion-col>

        <ion-col size="9" class="ion-no-padding">
          <ion-row class="ion-align-items-center" no-wrap>
            <ion-col class="ion-no-padding ion-align-self-start">
              <h2 class="text-name-product">
                <strong>{{ name }}</strong>
              </h2>

              <p *ngIf="brand">
                <strong
                  ><em>{{ brand }}</em></strong
                >
              </p>

              <ng-content></ng-content>
            </ion-col>

            <ion-col
              *ngIf="!editing"
              size="auto"
              class="ion-no-padding ion-align-self-start ion-text-center"
            >
              <ion-chip color="success" outline>
                <strong>{{ quantity }}</strong>
              </ion-chip>

              <p
                class="ion-no-margin ion-no-padding"
                style="font-size: 0.7em; font-wigth: 200"
              >
                Stock
              </p>
            </ion-col>

            <ion-col
              *ngIf="editing"
              size="2"
              class="ion-align-self-center col-add-remove-product"
            >
              <ion-row
                class="ion-align-items-center ion-justify-content-between row-detail-item"
              >
                <ion-col size="12" class="ion-align-self-center">
                  <ion-button
                    size="small"
                    fill="clear"
                    class="btn-icon ion-text-center"
                    (click)="incrementQuantity()"
                  >
                    <ion-icon name="add"></ion-icon>
                  </ion-button>
                </ion-col>
              </ion-row>

              <ion-row
                class="ion-align-items-center ion-justify-content-between row-detail-item"
              >
                <ion-col
                  size="12"
                  class="ion-align-self-center ion-text-center"
                >
                  <ion-input
                    type="number"
                    inputmode="number"
                    [formControl]="quantityFormControl"
                    style="
                      --padding-start: 0;
                      --padding-top: 0;
                      --padding-bottom: 0;
                      padding-end: 0;
                    "
                  >
                  </ion-input>
                </ion-col>
              </ion-row>

              <ion-row
                class="ion-align-items-center ion-justify-content-between row-detail-item"
              >
                <ion-col size="12" class="ion-align-self-center">
                  <ion-button
                    size="small"
                    fill="clear"
                    class="btn-icon ion-text-center"
                    (click)="decrementQuantity()"
                  >
                    <ion-icon name="remove"></ion-icon>
                  </ion-button>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-center">
            <ion-col class="ion-no-padding">
              <div *ngIf="!editing" class="app-currency bold">
                <ion-text color="dark" style="font-size: 1.1em">
                  <strong>{{ price | currency: currencyCode }} - c/u</strong>
                </ion-text>
              </div>

              <ion-item
                *ngIf="editing"
                lines="none"
                style="--inner-padding-end: 8px"
              >
                <ion-label position="floating">Precio unitario</ion-label>

                <ion-input
                  class="app-currency"
                  type="number"
                  inputmode="number"
                  [formControl]="priceFormControl"
                >
                </ion-input>

                <!-- <div slot="end" class="ion-align-self-end ion-no-margin" style="margin-left: 8px">

                </div> -->
              </ion-item>
            </ion-col>

            <ion-col
              size="auto"
              class="ion-no-padding ion-align-self-end ion-text-right"
            >
              <ion-chip
                *ngIf="editing"
                class="action-button"
                color="medium"
                outline
                (click)="cancelEdit()"
              >
                <fa-icon
                  [icon]="['fas', 'undo']"
                  size="lg"
                  [fixedWidth]="true"
                ></fa-icon>
              </ion-chip>

              <ion-chip
                *ngIf="editing"
                class="action-button"
                color="success"
                outline
                (click)="toggleEdit()"
                [ngClass]="{ disabled: editing && !isValid }"
              >
                <fa-icon
                  [icon]="['fas', editing ? 'save' : 'edit']"
                  size="lg"
                  [fixedWidth]="true"
                ></fa-icon>
              </ion-chip>

              <ion-chip
                *ngIf="editable && !editing"
                class="action-button"
                [color]="'success'"
                outline
                (click)="toggleEdit()"
              >
                <fa-icon
                  [icon]="['fas', 'edit']"
                  size="lg"
                  [fixedWidth]="true"
                ></fa-icon>
              </ion-chip>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card-content>
</ion-card>
